## ЁЯРЫ EMAIL CONFIRMATION BUG FIX REPORT

### тЭМ р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ
```
ERROR: relation "profiles" does not exist (SQLSTATE 42P01)
```

### ЁЯФН р╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣М
1. **Supabase Log р╣Бр╕кр╕Фр╕Зр╕зр╣Ир╕▓:**
   - User р╕кр╕бр╕▒р╕Др╕гр╕кр╕│р╣Ар╕гр╣Зр╕И: `user_signedup` тЬЕ
   - р╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕ер╕ер╣Йр╕бр╣Ар╕лр╕ер╕з: Database error тЭМ

2. **р╕кр╕▓р╣Ар╕лр╕Хр╕╕:**
   - Database function `handle_email_confirmation()` р╕нр╣Йр╕▓р╕Зр╕Цр╕╢р╕Зр╕Хр╕▓р╕гр╕▓р╕З `profiles`
   - р╣Бр╕Хр╣Ир╣Ар╕гр╕▓р╣Гр╕Кр╣Йр╕Хр╕▓р╕гр╕▓р╕З `user_profiles` (р╕Хр╕▓р╕бр╣Бр╕Ьр╕Щр╕Бр╕▓р╕г redesign)
   - р╣Ар╕Бр╕┤р╕Ф mismatch р╕гр╕░р╕лр╕зр╣Ир╕▓р╕З function р╣Бр╕ер╕░ table name

### ЁЯЫая╕П р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В
1. **р╕ер╕Ъ function р╣Ар╕Бр╣Ир╕▓** р╕Чр╕╡р╣Ир╕нр╣Йр╕▓р╕Зр╕Цр╕╢р╕З `profiles`
2. **р╕кр╕гр╣Йр╕▓р╕З function р╣Гр╕лр╕бр╣И** р╕Чр╕╡р╣Ир╕нр╣Йр╕▓р╕Зр╕Цр╕╢р╕З `user_profiles` 
3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ trigger** `on_email_confirmed` р╕вр╕▒р╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И

### ЁЯУЭ р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В
1. р╕гр╕▒р╕Щр╣Др╕Яр╕ер╣М `fix_database_table_reference.sql` р╣Гр╕Щ Supabase SQL Editor
2. р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И
3. р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕ер╕Ьр╣Ир╕▓р╕Щр╕ер╕┤р╕Зр╕Др╣М

### тЪб р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
- тЬЕ Function р╣Гр╕Кр╣Й `user_profiles` table р╣Бр╕Чр╕Щ `profiles`
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б error handling р╣Бр╕ер╕░ logging
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б `ON CONFLICT` р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ duplicate

### ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Хр╣Ир╕нр╣Др╕Ы
1. р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И
2. р╕Др╕ер╕┤р╕Бр╕ер╕┤р╕Зр╕Др╣Мр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ `user_profiles` р╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

---
**р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Др╕гр╕▒р╣Йр╕Зр╕Щр╕╡р╣Йр╕Ир╕░р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓ "Error confirming user" р╕Чр╕╡р╣Ир╣Ар╕Бр╕┤р╕Фр╕Ир╕▓р╕Б table name mismatch**